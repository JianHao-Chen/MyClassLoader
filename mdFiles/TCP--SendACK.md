---
title: ACK发送场景
category: TCP/IP
---

本文将记录ACK的发送场景。

<!--more-->

---

有以下几种情景，TCP会把ack包发出去：

1. 收到1个包，启动200ms定时器，等到200ms的定时器到点了（第二个包没来），于是对这个包的确认ack被发送。这叫做“延迟发送”；
2. 收到1个包，启动200ms定时器，200ms定时器还没到，第二个数据包又来了（两个数据包一个ack）；
3. 收到1个包，启动200ms定时器，还没超时，正好要给对方发点内容。于是对这个包的确认ack就跟着捎过去。这叫做“捎带发送”；
4. 每当TCP接收到一个超出期望序号的失序数据时，它总是发送一个确认序号为其期望序号的ACK；
5. 窗口更新或者也叫做打开窗口（接收端窗口达到最大的时候，接收缓存中的数据全部推向进程导致接收缓存为空），通知发送端可以继续发送；
6. 正常情况下对对方保活探针的响应，详见TCP keepalive。 